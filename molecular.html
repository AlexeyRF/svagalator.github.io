<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Физика: Молекулярная физика</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: #121212;
            color: #e0e0e0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #333;
        }

        h1 {
            color: #4fc3f7;
            margin-bottom: 10px;
            font-size: 2.2em;
        }

        .subtitle {
            color: #90a4ae;
            font-size: 1.1em;
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 30px;
            padding: 15px;
            background-color: #1e1e1e;
            border-radius: 8px;
        }

        .nav-btn {
            padding: 12px 24px;
            background-color: #2d2d2d;
            color: #e0e0e0;
            border: 1px solid #444;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s ease;
        }

        .nav-btn:hover {
            background-color: #3d3d3d;
            transform: translateY(-2px);
        }

        .nav-btn.active {
            background-color: #1565c0;
            border-color: #64b5f6;
        }

        .nav-btn.disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .formula-section {
            background-color: #1e1e1e;
            border-radius: 10px;
            padding: 25px;
            border: 1px solid #333;
            transition: transform 0.3s ease;
        }

        .formula-section:hover {
            transform: translateY(-5px);
            border-color: #444;
        }

        .section-title {
            color: #81c784;
            margin-bottom: 20px;
            font-size: 1.5em;
            padding-bottom: 10px;
            border-bottom: 1px solid #333;
        }

        .formula-group {
            margin-bottom: 25px;
        }

        .formula-item {
            margin-bottom: 20px;
            padding: 15px;
            background-color: #252525;
            border-radius: 8px;
            border-left: 4px solid #388e3c;
        }

        .formula-name {
            font-weight: bold;
            color: #bb86fc;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .formula-expression {
            font-family: 'Cambria Math', serif;
            font-size: 1.4em;
            color: #ffb74d;
            margin-bottom: 15px;
            padding: 10px;
            background-color: #2a2a2a;
            border-radius: 5px;
            text-align: center;
            border: 1px solid #333;
        }

        .variables-container {
            margin: 15px 0;
        }

        .variable-row {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
            gap: 10px;
            flex-wrap: wrap;
        }

        .variable-label {
            min-width: 80px;
            color: #a5d6a7;
            font-weight: bold;
        }

        .input-group {
            display: flex;
            align-items: center;
            gap: 5px;
            background-color: #2d2d2d;
            padding: 5px 10px;
            border-radius: 5px;
            border: 1px solid #444;
        }

        .mantissa-input {
            width: 100px;
            padding: 8px;
            background-color: #333;
            color: #fff;
            border: 1px solid #555;
            border-radius: 4px;
            text-align: center;
        }

        .exponent-input {
            width: 70px;
            padding: 8px;
            background-color: #333;
            color: #fff;
            border: 1px solid #555;
            border-radius: 4px;
            text-align: center;
        }

        .unit-select {
            width: 120px;
            padding: 8px;
            background-color: #333;
            color: #fff;
            border: 1px solid #555;
            border-radius: 4px;
        }

        .times-ten {
            color: #90a4ae;
            margin: 0 5px;
        }

        .calculate-btn {
            width: 100%;
            padding: 12px;
            background-color: #388e3c;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            margin-top: 10px;
            transition: background-color 0.3s ease;
        }

        .calculate-btn:hover {
            background-color: #2e7d32;
        }

        .result-container {
            margin-top: 20px;
            padding: 15px;
            background-color: #1b5e20;
            border-radius: 8px;
            border: 1px solid #388e3c;
            display: none;
        }

        .result-title {
            color: #bb86fc;
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .result-value {
            font-size: 1.3em;
            color: #81c784;
            font-weight: bold;
            word-break: break-all;
        }

        .unit {
            color: #ffb74d;
            font-size: 0.9em;
        }

        .clear-btn {
            background-color: #d32f2f;
            margin-top: 10px;
        }

        .clear-btn:hover {
            background-color: #c62828;
        }

        .process-selector {
            margin: 10px 0;
            padding: 8px;
            background-color: #333;
            color: white;
            border: 1px solid #555;
            border-radius: 4px;
            width: 100%;
        }

        @media (max-width: 768px) {
            .content {
                grid-template-columns: 1fr;
            }
            
            .nav-buttons {
                flex-direction: column;
            }
            
            .nav-btn {
                width: 100%;
            }
        }
    </style>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: #121212;
            color: #e0e0e0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #333;
        }

        h1 {
            color: #64b5f6;
            margin-bottom: 10px;
            font-size: 2.2em;
        }

        .subtitle {
            color: #90a4ae;
            font-size: 1.1em;
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 30px;
            padding: 15px;
            background-color: #1e1e1e;
            border-radius: 8px;
        }

        .nav-btn {
            padding: 12px 24px;
            background-color: #2d2d2d;
            color: #e0e0e0;
            border: 1px solid #444;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s ease;
        }

        .nav-btn:hover {
            background-color: #3d3d3d;
            transform: translateY(-2px);
        }

        .nav-btn.active {
            background-color: #1565c0;
            border-color: #64b5f6;
        }

        .nav-btn.disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .formula-section {
            background-color: #1e1e1e;
            border-radius: 10px;
            padding: 25px;
            border: 1px solid #333;
            transition: transform 0.3s ease;
        }

        .formula-section:hover {
            transform: translateY(-5px);
            border-color: #444;
        }

        .section-title {
            color: #4fc3f7;
            margin-bottom: 20px;
            font-size: 1.5em;
            padding-bottom: 10px;
            border-bottom: 1px solid #333;
        }

        .formula-group {
            margin-bottom: 25px;
        }

        .formula-item {
            margin-bottom: 20px;
            padding: 15px;
            background-color: #252525;
            border-radius: 8px;
            border-left: 4px solid #1565c0;
        }

        .formula-name {
            font-weight: bold;
            color: #bb86fc;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .formula-expression {
            font-family: 'Cambria Math', serif;
            font-size: 1.4em;
            color: #ffb74d;
            margin-bottom: 15px;
            padding: 10px;
            background-color: #2a2a2a;
            border-radius: 5px;
            text-align: center;
            border: 1px solid #333;
        }

        .variables-container {
            margin: 15px 0;
        }

        .variable-row {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
            gap: 10px;
            flex-wrap: wrap;
        }

        .variable-label {
            min-width: 80px;
            color: #a5d6a7;
            font-weight: bold;
        }

        .input-group {
            display: flex;
            align-items: center;
            gap: 5px;
            background-color: #2d2d2d;
            padding: 5px 10px;
            border-radius: 5px;
            border: 1px solid #444;
        }

        .mantissa-input {
            width: 100px;
            padding: 8px;
            background-color: #333;
            color: #fff;
            border: 1px solid #555;
            border-radius: 4px;
            text-align: center;
        }

        .exponent-input {
            width: 70px;
            padding: 8px;
            background-color: #333;
            color: #fff;
            border: 1px solid #555;
            border-radius: 4px;
            text-align: center;
        }

        .unit-select {
            width: 120px;
            padding: 8px;
            background-color: #333;
            color: #fff;
            border: 1px solid #555;
            border-radius: 4px;
        }

        .times-ten {
            color: #90a4ae;
            margin: 0 5px;
        }

        .calculate-btn {
            width: 100%;
            padding: 12px;
            background-color: #1976d2;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            margin-top: 10px;
            transition: background-color 0.3s ease;
        }

        .calculate-btn:hover {
            background-color: #1565c0;
        }

        .result-container {
            margin-top: 20px;
            padding: 15px;
            background-color: #1a237e;
            border-radius: 8px;
            border: 1px solid #303f9f;
            display: none;
        }

        .result-title {
            color: #bb86fc;
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .result-value {
            font-size: 1.3em;
            color: #4fc3f7;
            font-weight: bold;
            word-break: break-all;
        }

        .unit {
            color: #ffb74d;
            font-size: 0.9em;
        }

        .clear-btn {
            background-color: #d32f2f;
            margin-top: 10px;
        }

        .clear-btn:hover {
            background-color: #c62828;
        }

        @media (max-width: 768px) {
            .content {
                grid-template-columns: 1fr;
            }
            
            .nav-buttons {
                flex-direction: column;
            }
            
            .nav-btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="nav-buttons">
            <button class="nav-btn" onclick="window.location.href='mechanics.html'">Механика</button>
            <button class="nav-btn active">Молекулярная физика</button>
            <button class="nav-btn" onclick="window.location.href='electrodynamics.html'">Электродинамика</button>
            <button class="nav-btn" onclick="window.location.href='optics.html'">Оптика</button>
            <button class="nav-btn" onclick="window.location.href='quantum.html'">Квантовая физика</button>
            <button class="nav-btn" onclick="window.location.href='ballistics.html'">Баллистика</button>
            <button class="nav-btn" onclick="window.location.href='https://alexeyrf.github.io/denlator.github.io/denlator.html'">Планеты</button>
        </div>

        <div class="content">
            <div class="formula-section">
                <h2 class="section-title">Уравнение состояния</h2>
                
                <div class="formula-group">
                    <div class="formula-item">
                        <div class="formula-name">Уравнение Менделеева-Клапейрона</div>
                        <div class="formula-expression">pV = νRT = (m/M)RT</div>
                        <div class="variables-container">
                            <div class="variable-row">
                                <span class="variable-label">Давление (p):</span>
                                <div class="input-group">
                                    <input type="number" class="mantissa-input p-mantissa" placeholder="мантисса">
                                    <span class="times-ten">×10</span>
                                    <sup><input type="number" class="exponent-input p-exponent" placeholder="степень" value="0"></sup>
                                    <select class="unit-select p-unit">
                                        <option value="Па">Па</option>
                                        <option value="атм">атм</option>
                                        <option value="бар">бар</option>
                                        <option value="мм рт.ст.">мм рт.ст.</option>
                                    </select>
                                </div>
                            </div>
                            <div class="variable-row">
                                <span class="variable-label">Объём (V):</span>
                                <div class="input-group">
                                    <input type="number" class="mantissa-input v-mantissa" placeholder="мантисса">
                                    <span class="times-ten">×10</span>
                                    <sup><input type="number" class="exponent-input v-exponent" placeholder="степень" value="0"></sup>
                                    <select class="unit-select v-unit">
                                        <option value="м³">м³</option>
                                        <option value="л">л</option>
                                        <option value="мл">мл</option>
                                        <option value="см³">см³</option>
                                    </select>
                                </div>
                            </div>
                            <div class="variable-row">
                                <span class="variable-label">Кол-во в-ва (ν):</span>
                                <div class="input-group">
                                    <input type="number" class="mantissa-input nu-mantissa" placeholder="мантисса">
                                    <span class="times-ten">×10</span>
                                    <sup><input type="number" class="exponent-input nu-exponent" placeholder="степень" value="0"></sup>
                                    <select class="unit-select nu-unit">
                                        <option value="моль">моль</option>
                                        <option value="кмоль">кмоль</option>
                                        <option value="ммоль">ммоль</option>
                                    </select>
                                </div>
                            </div>
                            <div class="variable-row">
                                <span class="variable-label">Температура (T):</span>
                                <div class="input-group">
                                    <input type="number" class="mantissa-input t-mantissa" placeholder="мантисса" value="293">
                                    <span class="times-ten">×10</span>
                                    <sup><input type="number" class="exponent-input t-exponent" placeholder="степень" value="0"></sup>
                                    <select class="unit-select t-unit">
                                        <option value="К">К</option>
                                        <option value="°C">°C</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <button class="calculate-btn" onclick="calculateMendeleevClapeyron()">Вычислить</button>
                        <button class="calculate-btn clear-btn" onclick="clearMendeleevClapeyron()">Очистить</button>
                        <div class="result-container" id="result-mendeleev-clapeyron">
                            <div class="result-title">Результат:</div>
                            <div class="result-value"></div>
                        </div>
                    </div>

                    <div class="formula-item">
                        <div class="formula-name">Изопроцессы идеального газа</div>
                        <div class="formula-expression" id="isoprocess-equation">p₁V₁ = p₂V₂ (изотерма)</div>
                        <select class="process-selector" onchange="changeIsoprocess()">
                            <option value="isothermal">Изотермический (T=const): p₁V₁ = p₂V₂</option>
                            <option value="isobaric">Изобарный (p=const): V₁/T₁ = V₂/T₂</option>
                            <option value="isochoric">Изохорный (V=const): p₁/T₁ = p₂/T₂</option>
                        </select>
                        <div class="variables-container">
                            <div class="variable-row">
                                <span class="variable-label">p₁:</span>
                                <div class="input-group">
                                    <input type="number" class="mantissa-input p1-mantissa" placeholder="мантисса">
                                    <span class="times-ten">×10</span>
                                    <sup><input type="number" class="exponent-input p1-exponent" placeholder="степень" value="0"></sup>
                                    <select class="unit-select p1-unit">
                                        <option value="Па">Па</option>
                                        <option value="атм">атм</option>
                                        <option value="бар">бар</option>
                                        <option value="мм рт.ст.">мм рт.ст.</option>
                                    </select>
                                </div>
                            </div>
                            <div class="variable-row">
                                <span class="variable-label">V₁:</span>
                                <div class="input-group">
                                    <input type="number" class="mantissa-input v1-mantissa" placeholder="мантисса">
                                    <span class="times-ten">×10</span>
                                    <sup><input type="number" class="exponent-input v1-exponent" placeholder="степень" value="0"></sup>
                                    <select class="unit-select v1-unit">
                                        <option value="м³">м³</option>
                                        <option value="л">л</option>
                                        <option value="мл">мл</option>
                                        <option value="см³">см³</option>
                                    </select>
                                </div>
                            </div>
                            <div class="variable-row">
                                <span class="variable-label">T₁:</span>
                                <div class="input-group">
                                    <input type="number" class="mantissa-input t1-mantissa" placeholder="мантисса" value="293">
                                    <span class="times-ten">×10</span>
                                    <sup><input type="number" class="exponent-input t1-exponent" placeholder="степень" value="0"></sup>
                                    <select class="unit-select t1-unit">
                                        <option value="К">К</option>
                                        <option value="°C">°C</option>
                                    </select>
                                </div>
                            </div>
                            <div class="variable-row">
                                <span class="variable-label">p₂:</span>
                                <div class="input-group">
                                    <input type="number" class="mantissa-input p2-mantissa" placeholder="мантисса">
                                    <span class="times-ten">×10</span>
                                    <sup><input type="number" class="exponent-input p2-exponent" placeholder="степень" value="0"></sup>
                                    <select class="unit-select p2-unit">
                                        <option value="Па">Па</option>
                                        <option value="атм">атм</option>
                                        <option value="бар">бар</option>
                                        <option value="мм рт.ст.">мм рт.ст.</option>
                                    </select>
                                </div>
                            </div>
                            <div class="variable-row">
                                <span class="variable-label">V₂:</span>
                                <div class="input-group">
                                    <input type="number" class="mantissa-input v2-mantissa" placeholder="мантисса">
                                    <span class="times-ten">×10</span>
                                    <sup><input type="number" class="exponent-input v2-exponent" placeholder="степень" value="0"></sup>
                                    <select class="unit-select v2-unit">
                                        <option value="м³">м³</option>
                                        <option value="л">л</option>
                                        <option value="мл">мл</option>
                                        <option value="см³">см³</option>
                                    </select>
                                </div>
                            </div>
                            <div class="variable-row">
                                <span class="variable-label">T₂:</span>
                                <div class="input-group">
                                    <input type="number" class="mantissa-input t2-mantissa" placeholder="мантисса" value="293">
                                    <span class="times-ten">×10</span>
                                    <sup><input type="number" class="exponent-input t2-exponent" placeholder="степень" value="0"></sup>
                                    <select class="unit-select t2-unit">
                                        <option value="К">К</option>
                                        <option value="°C">°C</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <button class="calculate-btn" onclick="calculateIsoprocess()">Вычислить</button>
                        <button class="calculate-btn clear-btn" onclick="clearIsoprocess()">Очистить</button>
                        <div class="result-container" id="result-isoprocess">
                            <div class="result-title">Результат:</div>
                            <div class="result-value"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="formula-section">
                <h2 class="section-title">МКТ и энергия</h2>
                
                <div class="formula-group">
                    <div class="formula-item">
                        <div class="formula-name">Основное уравнение МКТ (через среднюю энергию)</div>
                        <div class="formula-expression">p = (2/3) × n × E</div>
                        <div class="variables-container">
                            <div class="variable-row">
                                <span class="variable-label">Давление (p):</span>
                                <div class="input-group">
                                    <input type="number" class="mantissa-input p-mantissa" placeholder="мантисса">
                                    <span class="times-ten">×10</span>
                                    <sup><input type="number" class="exponent-input p-exponent" placeholder="степень" value="0"></sup>
                                    <select class="unit-select p-unit">
                                        <option value="Па">Па</option>
                                        <option value="атм">атм</option>
                                        <option value="бар">бар</option>
                                        <option value="мм рт.ст.">мм рт.ст.</option>
                                    </select>
                                </div>
                            </div>
                            <div class="variable-row">
                                <span class="variable-label">Концентрация (n):</span>
                                <div class="input-group">
                                    <input type="number" class="mantissa-input n-mantissa" placeholder="мантисса">
                                    <span class="times-ten">×10</span>
                                    <sup><input type="number" class="exponent-input n-exponent" placeholder="степень" value="0"></sup>
                                    <select class="unit-select n-unit">
                                        <option value="м⁻³">м⁻³</option>
                                        <option value="см⁻³">см⁻³</option>
                                        <option value="л⁻¹">л⁻¹</option>
                                    </select>
                                </div>
                            </div>
                            <div class="variable-row">
                                <span class="variable-label">Энергия (E):</span>
                                <div class="input-group">
                                    <input type="number" class="mantissa-input e-mantissa" placeholder="мантисса">
                                    <span class="times-ten">×10</span>
                                    <sup><input type="number" class="exponent-input e-exponent" placeholder="степень" value="0"></sup>
                                    <select class="unit-select e-unit">
                                        <option value="Дж">Дж</option>
                                        <option value="кДж">кДж</option>
                                        <option value="эВ">эВ</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <button class="calculate-btn" onclick="calculateMKT()">Вычислить</button>
                        <button class="calculate-btn clear-btn" onclick="clearMKT()">Очистить</button>
                        <div class="result-container" id="result-mkt">
                            <div class="result-title">Результат:</div>
                            <div class="result-value"></div>
                        </div>
                    </div>

                    <div class="formula-item">
                        <div class="formula-name">Основное уравнение МКТ (через скорость)</div>
                        <div class="formula-expression">p = (1/3) × n × m₀ × v²</div>
                        <div class="variables-container">
                            <div class="variable-row">
                                <span class="variable-label">Давление (p):</span>
                                <div class="input-group">
                                    <input type="number" class="mantissa-input p2-mantissa" placeholder="мантисса">
                                    <span class="times-ten">×10</span>
                                    <sup><input type="number" class="exponent-input p2-exponent" placeholder="степень" value="0"></sup>
                                    <select class="unit-select p2-unit">
                                        <option value="Па">Па</option>
                                        <option value="атм">атм</option>
                                        <option value="бар">бар</option>
                                        <option value="мм рт.ст.">мм рт.ст.</option>
                                    </select>
                                </div>
                            </div>
                            <div class="variable-row">
                                <span class="variable-label">Концентрация (n):</span>
                                <div class="input-group">
                                    <input type="number" class="mantissa-input n2-mantissa" placeholder="мантисса">
                                    <span class="times-ten">×10</span>
                                    <sup><input type="number" class="exponent-input n2-exponent" placeholder="степень" value="0"></sup>
                                    <select class="unit-select n2-unit">
                                        <option value="м⁻³">м⁻³</option>
                                        <option value="см⁻³">см⁻³</option>
                                        <option value="л⁻¹">л⁻¹</option>
                                    </select>
                                </div>
                            </div>
                            <div class="variable-row">
                                <span class="variable-label">Масса мол. (m₀):</span>
                                <div class="input-group">
                                    <input type="number" class="mantissa-input m0-mantissa" placeholder="мантисса">
                                    <span class="times-ten">×10</span>
                                    <sup><input type="number" class="exponent-input m0-exponent" placeholder="степень" value="-27"></sup>
                                    <select class="unit-select m0-unit">
                                        <option value="кг">кг</option>
                                        <option value="г">г</option>
                                        <option value="а.е.м.">а.е.м.</option>
                                    </select>
                                </div>
                            </div>
                            <div class="variable-row">
                                <span class="variable-label">Скорость (v):</span>
                                <div class="input-group">
                                    <input type="number" class="mantissa-input v2-mantissa" placeholder="мантисса">
                                    <span class="times-ten">×10</span>
                                    <sup><input type="number" class="exponent-input v2-exponent" placeholder="степень" value="0"></sup>
                                    <select class="unit-select v2-unit">
                                        <option value="м/с">м/с</option>
                                        <option value="км/с">км/с</option>
                                        <option value="км/ч">км/ч</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <button class="calculate-btn" onclick="calculateMKT2()">Вычислить</button>
                        <button class="calculate-btn clear-btn" onclick="clearMKT2()">Очистить</button>
                        <div class="result-container" id="result-mkt2">
                            <div class="result-title">Результат:</div>
                            <div class="result-value"></div>
                        </div>
                    </div>

                    <div class="formula-item">
                        <div class="formula-name">Средняя кинетическая энергия</div>
                        <div class="formula-expression">E = (3/2) × k × T</div>
                        <div class="variables-container">
                            <div class="variable-row">
                                <span class="variable-label">Энергия (E):</span>
                                <div class="input-group">
                                    <input type="number" class="mantissa-input e-mantissa" placeholder="мантисса">
                                    <span class="times-ten">×10</span>
                                    <sup><input type="number" class="exponent-input e-exponent" placeholder="степень" value="0"></sup>
                                    <select class="unit-select e-unit">
                                        <option value="Дж">Дж</option>
                                        <option value="кДж">кДж</option>
                                        <option value="эВ">эВ</option>
                                    </select>
                                </div>
                            </div>
                            <div class="variable-row">
                                <span class="variable-label">Температура (T):</span>
                                <div class="input-group">
                                    <input type="number" class="mantissa-input t-mantissa" placeholder="мантисса" value="293">
                                    <span class="times-ten">×10</span>
                                    <sup><input type="number" class="exponent-input t-exponent" placeholder="степень" value="0"></sup>
                                    <select class="unit-select t-unit">
                                        <option value="К">К</option>
                                        <option value="°C">°C</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <button class="calculate-btn" onclick="calculateKineticEnergy()">Вычислить</button>
                        <button class="calculate-btn clear-btn" onclick="clearKineticEnergy()">Очистить</button>
                        <div class="result-container" id="result-kinetic-energy">
                            <div class="result-title">Результат:</div>
                            <div class="result-value"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="formula-section">
                <h2 class="section-title">Термодинамика</h2>
                
                <div class="formula-group">
                    <div class="formula-item">
                        <div class="formula-name">Внутренняя энергия газа</div>
                        <div class="formula-expression">U = (3/2) × ν × R × T</div>
                        <div class="variables-container">
                            <div class="variable-row">
                                <span class="variable-label">Энергия (U):</span>
                                <div class="input-group">
                                    <input type="number" class="mantissa-input u-mantissa" placeholder="мантисса">
                                    <span class="times-ten">×10</span>
                                    <sup><input type="number" class="exponent-input u-exponent" placeholder="степень" value="0"></sup>
                                    <select class="unit-select u-unit">
                                        <option value="Дж">Дж</option>
                                        <option value="кДж">кДж</option>
                                        <option value="кал">кал</option>
                                        <option value="ккал">ккал</option>
                                    </select>
                                </div>
                            </div>
                            <div class="variable-row">
                                <span class="variable-label">Кол-во в-ва (ν):</span>
                                <div class="input-group">
                                    <input type="number" class="mantissa-input nu-mantissa" placeholder="мантисса">
                                    <span class="times-ten">×10</span>
                                    <sup><input type="number" class="exponent-input nu-exponent" placeholder="степень" value="0"></sup>
                                    <select class="unit-select nu-unit">
                                        <option value="моль">моль</option>
                                        <option value="кмоль">кмоль</option>
                                        <option value="ммоль">ммоль</option>
                                    </select>
                                </div>
                            </div>
                            <div class="variable-row">
                                <span class="variable-label">Температура (T):</span>
                                <div class="input-group">
                                    <input type="number" class="mantissa-input t-mantissa" placeholder="мантисса" value="293">
                                    <span class="times-ten">×10</span>
                                    <sup><input type="number" class="exponent-input t-exponent" placeholder="степень" value="0"></sup>
                                    <select class="unit-select t-unit">
                                        <option value="К">К</option>
                                        <option value="°C">°C</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <button class="calculate-btn" onclick="calculateInternalEnergy()">Вычислить</button>
                        <button class="calculate-btn clear-btn" onclick="clearInternalEnergy()">Очистить</button>
                        <div class="result-container" id="result-internal-energy">
                            <div class="result-title">Результат:</div>
                            <div class="result-value"></div>
                        </div>
                    </div>

                    <div class="formula-item">
                        <div class="formula-name">Первый закон термодинамики</div>
                        <div class="formula-expression">Q = ΔU + A'</div>
                        <div class="variables-container">
                            <div class="variable-row">
                                <span class="variable-label">Теплота (Q):</span>
                                <div class="input-group">
                                    <input type="number" class="mantissa-input q-mantissa" placeholder="мантисса">
                                    <span class="times-ten">×10</span>
                                    <sup><input type="number" class="exponent-input q-exponent" placeholder="степень" value="0"></sup>
                                    <select class="unit-select q-unit">
                                        <option value="Дж">Дж</option>
                                        <option value="кДж">кДж</option>
                                        <option value="кал">кал</option>
                                        <option value="ккал">ккал</option>
                                    </select>
                                </div>
                            </div>
                            <div class="variable-row">
                                <span class="variable-label">ΔU:</span>
                                <div class="input-group">
                                    <input type="number" class="mantissa-input du-mantissa" placeholder="мантисса">
                                    <span class="times-ten">×10</span>
                                    <sup><input type="number" class="exponent-input du-exponent" placeholder="степень" value="0"></sup>
                                    <select class="unit-select du-unit">
                                        <option value="Дж">Дж</option>
                                        <option value="кДж">кДж</option>
                                        <option value="кал">кал</option>
                                        <option value="ккал">ккал</option>
                                    </select>
                                </div>
                            </div>
                            <div class="variable-row">
                                <span class="variable-label">Работа (A'):</span>
                                <div class="input-group">
                                    <input type="number" class="mantissa-input a-mantissa" placeholder="мантисса">
                                    <span class="times-ten">×10</span>
                                    <sup><input type="number" class="exponent-input a-exponent" placeholder="степень" value="0"></sup>
                                    <select class="unit-select a-unit">
                                        <option value="Дж">Дж</option>
                                        <option value="кДж">кДж</option>
                                        <option value="кал">кал</option>
                                        <option value="ккал">ккал</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <button class="calculate-btn" onclick="calculateFirstLaw()">Вычислить</button>
                        <button class="calculate-btn clear-btn" onclick="clearFirstLaw()">Очистить</button>
                        <div class="result-container" id="result-first-law">
                            <div class="result-title">Результат:</div>
                            <div class="result-value"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="formula-section">
                <h2 class="section-title">Тепловые машины</h2>
                
                <div class="formula-group">
                    <div class="formula-item">
                        <div class="formula-name">КПД тепловой машины</div>
                        <div class="formula-expression">η = A' / Q₁ = (Q₁ - Q₂) / Q₁</div>
                        <div class="variables-container">
                            <div class="variable-row">
                                <span class="variable-label">КПД (η):</span>
                                <div class="input-group">
                                    <input type="number" class="mantissa-input eta-mantissa" placeholder="мантисса">
                                    <span class="times-ten">×10</span>
                                    <sup><input type="number" class="exponent-input eta-exponent" placeholder="степень" value="0"></sup>
                                    <select class="unit-select eta-unit">
                                        <option value="доля">доля</option>
                                        <option value="%">%</option>
                                    </select>
                                </div>
                            </div>
                            <div class="variable-row">
                                <span class="variable-label">Работа (A'):</span>
                                <div class="input-group">
                                    <input type="number" class="mantissa-input a-mantissa" placeholder="мантисса">
                                    <span class="times-ten">×10</span>
                                    <sup><input type="number" class="exponent-input a-exponent" placeholder="степень" value="0"></sup>
                                    <select class="unit-select a-unit">
                                        <option value="Дж">Дж</option>
                                        <option value="кДж">кДж</option>
                                        <option value="кал">кал</option>
                                        <option value="ккал">ккал</option>
                                    </select>
                                </div>
                            </div>
                            <div class="variable-row">
                                <span class="variable-label">Q₁ (нагрев):</span>
                                <div class="input-group">
                                    <input type="number" class="mantissa-input q1-mantissa" placeholder="мантисса">
                                    <span class="times-ten">×10</span>
                                    <sup><input type="number" class="exponent-input q1-exponent" placeholder="степень" value="0"></sup>
                                    <select class="unit-select q1-unit">
                                        <option value="Дж">Дж</option>
                                        <option value="кДж">кДж</option>
                                        <option value="кал">кал</option>
                                        <option value="ккал">ккал</option>
                                    </select>
                                </div>
                            </div>
                            <div class="variable-row">
                                <span class="variable-label">Q₂ (холодиль):</span>
                                <div class="input-group">
                                    <input type="number" class="mantissa-input q2-mantissa" placeholder="мантисса">
                                    <span class="times-ten">×10</span>
                                    <sup><input type="number" class="exponent-input q2-exponent" placeholder="степень" value="0"></sup>
                                    <select class="unit-select q2-unit">
                                        <option value="Дж">Дж</option>
                                        <option value="кДж">кДж</option>
                                        <option value="кал">кал</option>
                                        <option value="ккал">ккал</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <button class="calculate-btn" onclick="calculateEfficiency()">Вычислить</button>
                        <button class="calculate-btn clear-btn" onclick="clearEfficiency()">Очистить</button>
                        <div class="result-container" id="result-efficiency">
                            <div class="result-title">Результат:</div>
                            <div class="result-value"></div>
                        </div>
                    </div>

                    <div class="formula-item">
                        <div class="formula-name">КПД цикла Карно</div>
                        <div class="formula-expression">η = 1 - T₂/T₁</div>
                        <div class="variables-container">
                            <div class="variable-row">
                                <span class="variable-label">КПД (η):</span>
                                <div class="input-group">
                                    <input type="number" class="mantissa-input eta-mantissa" placeholder="мантисса">
                                    <span class="times-ten">×10</span>
                                    <sup><input type="number" class="exponent-input eta-exponent" placeholder="степень" value="0"></sup>
                                    <select class="unit-select eta-unit">
                                        <option value="доля">доля</option>
                                        <option value="%">%</option>
                                    </select>
                                </div>
                            </div>
                            <div class="variable-row">
                                <span class="variable-label">T₁ (нагрев):</span>
                                <div class="input-group">
                                    <input type="number" class="mantissa-input t1-mantissa" placeholder="мантисса" value="373">
                                    <span class="times-ten">×10</span>
                                    <sup><input type="number" class="exponent-input t1-exponent" placeholder="степень" value="0"></sup>
                                    <select class="unit-select t1-unit">
                                        <option value="К">К</option>
                                        <option value="°C">°C</option>
                                    </select>
                                </div>
                            </div>
                            <div class="variable-row">
                                <span class="variable-label">T₂ (холодиль):</span>
                                <div class="input-group">
                                    <input type="number" class="mantissa-input t2-mantissa" placeholder="мантисса" value="293">
                                    <span class="times-ten">×10</span>
                                    <sup><input type="number" class="exponent-input t2-exponent" placeholder="степень" value="0"></sup>
                                    <select class="unit-select t2-unit">
                                        <option value="К">К</option>
                                        <option value="°C">°C</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <button class="calculate-btn" onclick="calculateCarnot()">Вычислить</button>
                        <button class="calculate-btn clear-btn" onclick="clearCarnot()">Очистить</button>
                        <div class="result-container" id="result-carnot">
                            <div class="result-title">Результат:</div>
                            <div class="result-value"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const R = 8.314462618; 
        const k = 1.380649e-23; 
        const Na = 6.02214076e23; 
        const atm_to_pa = 101325; 
        const bar_to_pa = 1e5; 
        const mmHg_to_pa = 133.322; 
        const liter_to_m3 = 0.001; 
        const ml_to_m3 = 1e-6; 
        const cm3_to_m3 = 1e-6; 
        const kmol_to_mol = 1000; 
        const mmol_to_mol = 0.001; 
        const kJ_to_J = 1000; 
        const eV_to_J = 1.602176634e-19; 
        const cal_to_J = 4.184; 
        const kcal_to_J = 4184; 
        const g_to_kg = 0.001; 
        const amu_to_kg = 1.66053906660e-27; 
        const kmh_to_ms = 1/3.6; 
        const kms_to_ms = 1000; 
        const cm_to_m = 0.01; 
        
        const unitConversion = {
            pressure: {
                'Па': 1,
                'атм': atm_to_pa,
                'бар': bar_to_pa,
                'мм рт.ст.': mmHg_to_pa
            },
            volume: {
                'м³': 1,
                'л': liter_to_m3,
                'мл': ml_to_m3,
                'см³': cm3_to_m3
            },
            amount: {
                'моль': 1,
                'кмоль': kmol_to_mol,
                'ммоль': mmol_to_mol
            },
            temperature: {
                'К': (val) => val,
                '°C': (val) => val + 273.15
            },
            temperature_reverse: {
                'К': (val) => val,
                '°C': (val) => val - 273.15
            },
            energy: {
                'Дж': 1,
                'кДж': kJ_to_J,
                'эВ': eV_to_J,
                'кал': cal_to_J,
                'ккал': kcal_to_J
            },
            concentration: {
                'м⁻³': 1,
                'см⁻³': 1/(cm_to_m**3),
                'л⁻¹': 1/liter_to_m3
            },
            mass: {
                'кг': 1,
                'г': g_to_kg,
                'а.е.м.': amu_to_kg
            },
            velocity: {
                'м/с': 1,
                'км/с': kms_to_ms,
                'км/ч': kmh_to_ms
            },
            efficiency: {
                'доля': 1,
                '%': 0.01
            }
        };

        function toNumber(mantissa, exponent, unit, type) {
            const value = parseFloat(mantissa) * Math.pow(10, parseInt(exponent) || 0);
            if (isNaN(value)) return NaN;
            
            if (type === 'temperature') {
                if (unit === '°C') {
                    return value + 273.15;
                }
                return value;
            }
            
            if (type === 'temperature_reverse') {
                if (unit === '°C') {
                    return value - 273.15;
                }
                return value;
            }
            
            const conversion = unitConversion[type];
            if (conversion && conversion[unit]) {
                return value * conversion[unit];
            }
            return value;
        }

        function fromNumber(value, unit, type) {
            if (isNaN(value)) return NaN;
            
            if (type === 'temperature') {
                if (unit === '°C') {
                    return value - 273.15;
                }
                return value;
            }
            
            const conversion = unitConversion[type];
            if (conversion && conversion[unit]) {
                return value / conversion[unit];
            }
            return value;
        }

        function formatResult(value, unit, type) {
            if (value === null || isNaN(value)) return "Ошибка вычисления";
            
            let displayValue;
            if (type === 'temperature') {
                displayValue = fromNumber(value, unit, 'temperature');
            } else {
                displayValue = fromNumber(value, unit, type);
            }
            
            if (Math.abs(displayValue) >= 10000 || (Math.abs(displayValue) < 0.001 && displayValue !== 0)) {
                const exponent = Math.floor(Math.log10(Math.abs(displayValue)));
                const mantissa = displayValue / Math.pow(10, exponent);
                return `${mantissa.toFixed(4)} ×10<sup>${exponent}</sup> ${unit}`;
            }
            return `${displayValue.toFixed(6)} ${unit}`;
        }

        function formatPercentage(value, unit) {
            if (value === null || isNaN(value)) return "Ошибка вычисления";
            
            let displayValue = value;
            if (unit === '%') {
                displayValue = value * 100;
                return `${displayValue.toFixed(2)}%`;
            }
            return `${displayValue.toFixed(4)}`;
        }

        function showResult(elementId, message) {
            const element = document.getElementById(elementId);
            element.querySelector('.result-value').innerHTML = message;
            element.style.display = 'block';
        }

        function hideResult(elementId) {
            document.getElementById(elementId).style.display = 'none';
        }

        function clearInputs(container) {
            const inputs = container.querySelectorAll('input[type="number"]');
            inputs.forEach(input => input.value = '');
        }

        function getFilledCount(values) {
            return values.filter(val => !isNaN(val) && val !== null).length;
        }

        function calculateMendeleevClapeyron() {
            const container = event.target.closest('.formula-item');
            const p = toNumber(
                container.querySelector('.p-mantissa').value, 
                container.querySelector('.p-exponent').value,
                container.querySelector('.p-unit').value,
                'pressure'
            );
            const v = toNumber(
                container.querySelector('.v-mantissa').value, 
                container.querySelector('.v-exponent').value,
                container.querySelector('.v-unit').value,
                'volume'
            );
            const nu = toNumber(
                container.querySelector('.nu-mantissa').value, 
                container.querySelector('.nu-exponent').value,
                container.querySelector('.nu-unit').value,
                'amount'
            );
            const t = toNumber(
                container.querySelector('.t-mantissa').value, 
                container.querySelector('.t-exponent').value,
                container.querySelector('.t-unit').value,
                'temperature'
            );
            
            let result, unit, type, message;
            const values = [p, v, nu, t];
            const filled = getFilledCount(values);
            
            if (filled < 3) {
                message = "Введите значения для любых трёх величин";
            } else {
                if (isNaN(p)) {
                    result = (nu * R * t) / v;
                    unit = container.querySelector('.p-unit').value;
                    type = 'pressure';
                    message = `Давление p = ${formatResult(result, unit, type)}`;
                } else if (isNaN(v)) {
                    result = (nu * R * t) / p;
                    unit = container.querySelector('.v-unit').value;
                    type = 'volume';
                    message = `Объём V = ${formatResult(result, unit, type)}`;
                } else if (isNaN(nu)) {
                    result = (p * v) / (R * t);
                    unit = container.querySelector('.nu-unit').value;
                    type = 'amount';
                    message = `Количество вещества ν = ${formatResult(result, unit, type)}`;
                } else if (isNaN(t)) {
                    result = (p * v) / (nu * R);
                    unit = container.querySelector('.t-unit').value;
                    type = 'temperature';
                    message = `Температура T = ${formatResult(result, unit, type)}`;
                }
            }
            
            showResult('result-mendeleev-clapeyron', message);
        }

        function clearMendeleevClapeyron() {
            const container = document.querySelector('.formula-section:nth-child(1) .formula-item:nth-child(1)');
            clearInputs(container);
            hideResult('result-mendeleev-clapeyron');
        }

        function changeIsoprocess() {
            const selector = document.querySelector('.process-selector');
            const equation = document.getElementById('isoprocess-equation');
            
            switch(selector.value) {
                case 'isothermal':
                    equation.textContent = "p₁V₁ = p₂V₂ (изотерма)";
                    break;
                case 'isobaric':
                    equation.textContent = "V₁/T₁ = V₂/T₂ (изобара)";
                    break;
                case 'isochoric':
                    equation.textContent = "p₁/T₁ = p₂/T₂ (изохора)";
                    break;
            }
        }

        function calculateIsoprocess() {
            const container = event.target.closest('.formula-item');
            const selector = document.querySelector('.process-selector');
            
            const p1 = toNumber(
                container.querySelector('.p1-mantissa').value, 
                container.querySelector('.p1-exponent').value,
                container.querySelector('.p1-unit').value,
                'pressure'
            );
            const v1 = toNumber(
                container.querySelector('.v1-mantissa').value, 
                container.querySelector('.v1-exponent').value,
                container.querySelector('.v1-unit').value,
                'volume'
            );
            const t1 = toNumber(
                container.querySelector('.t1-mantissa').value, 
                container.querySelector('.t1-exponent').value,
                container.querySelector('.t1-unit').value,
                'temperature'
            );
            const p2 = toNumber(
                container.querySelector('.p2-mantissa').value, 
                container.querySelector('.p2-exponent').value,
                container.querySelector('.p2-unit').value,
                'pressure'
            );
            const v2 = toNumber(
                container.querySelector('.v2-mantissa').value, 
                container.querySelector('.v2-exponent').value,
                container.querySelector('.v2-unit').value,
                'volume'
            );
            const t2 = toNumber(
                container.querySelector('.t2-mantissa').value, 
                container.querySelector('.t2-exponent').value,
                container.querySelector('.t2-unit').value,
                'temperature'
            );
            
            let result, unit, type, message;
            let unknownCount = 0;
            
            const values = [p1, v1, t1, p2, v2, t2];
            const unknownIndices = [];
            values.forEach((val, index) => {
                if (isNaN(val)) {
                    unknownCount++;
                    unknownIndices.push(index);
                }
            });
            
            if (unknownCount !== 1) {
                message = "Оставьте одну неизвестную величину";
            } else {
                const unknownIndex = unknownIndices[0];
                let paramName = '';
                let containerParam = null;
                
                switch(unknownIndex) {
                    case 0: paramName = 'p₁'; containerParam = container.querySelector('.p1-unit'); type = 'pressure'; break;
                    case 1: paramName = 'V₁'; containerParam = container.querySelector('.v1-unit'); type = 'volume'; break;
                    case 2: paramName = 'T₁'; containerParam = container.querySelector('.t1-unit'); type = 'temperature'; break;
                    case 3: paramName = 'p₂'; containerParam = container.querySelector('.p2-unit'); type = 'pressure'; break;
                    case 4: paramName = 'V₂'; containerParam = container.querySelector('.v2-unit'); type = 'volume'; break;
                    case 5: paramName = 'T₂'; containerParam = container.querySelector('.t2-unit'); type = 'temperature'; break;
                }
                
                unit = containerParam.value;
                
                switch(selector.value) {
                    case 'isothermal': 
                        if (unknownIndex === 0) result = (p2 * v2) / v1;
                        else if (unknownIndex === 1) result = (p2 * v2) / p1;
                        else if (unknownIndex === 3) result = (p1 * v1) / v2;
                        else if (unknownIndex === 4) result = (p1 * v1) / p2;
                        break;
                        
                    case 'isobaric':
                        if (unknownIndex === 1) result = (v2 * t1) / t2;
                        else if (unknownIndex === 2) result = (v1 * t2) / v2;
                        else if (unknownIndex === 4) result = (v1 * t2) / t1;
                        else if (unknownIndex === 5) result = (v2 * t1) / v1;
                        break;
                        
                    case 'isochoric': 
                        if (unknownIndex === 0) result = (p2 * t1) / t2;
                        else if (unknownIndex === 2) result = (p1 * t2) / p2;
                        else if (unknownIndex === 3) result = (p1 * t2) / t1;
                        else if (unknownIndex === 5) result = (p2 * t1) / p1;
                        break;
                }
                
                if (result !== undefined) {
                    message = `${paramName} = ${formatResult(result, unit, type)}`;
                } else {
                    message = "Невозможно вычислить эту величину для выбранного процесса";
                }
            }
            
            showResult('result-isoprocess', message);
        }

        function clearIsoprocess() {
            const container = document.querySelector('.formula-section:nth-child(1) .formula-item:nth-child(2)');
            clearInputs(container);
            hideResult('result-isoprocess');
        }

        function calculateMKT() {
            const container = event.target.closest('.formula-item');
            const p = toNumber(
                container.querySelector('.p-mantissa').value, 
                container.querySelector('.p-exponent').value,
                container.querySelector('.p-unit').value,
                'pressure'
            );
            const n = toNumber(
                container.querySelector('.n-mantissa').value, 
                container.querySelector('.n-exponent').value,
                container.querySelector('.n-unit').value,
                'concentration'
            );
            const e = toNumber(
                container.querySelector('.e-mantissa').value, 
                container.querySelector('.e-exponent').value,
                container.querySelector('.e-unit').value,
                'energy'
            );
            
            let result, unit, type, message;
            
            if (!isNaN(p) && !isNaN(n)) {
                result = (3 * p) / (2 * n);
                unit = container.querySelector('.e-unit').value;
                type = 'energy';
                message = `Средняя кинетическая энергия E = ${formatResult(result, unit, type)}`;
            } else if (!isNaN(p) && !isNaN(e)) {
                result = (3 * p) / (2 * e);
                unit = container.querySelector('.n-unit').value;
                type = 'concentration';
                message = `Концентрация n = ${formatResult(result, unit, type)}`;
            } else if (!isNaN(n) && !isNaN(e)) {
                result = (2 * n * e) / 3;
                unit = container.querySelector('.p-unit').value;
                type = 'pressure';
                message = `Давление p = ${formatResult(result, unit, type)}`;
            } else {
                message = "Введите значения для любых двух величин";
            }
            
            showResult('result-mkt', message);
        }

        function clearMKT() {
            const container = document.querySelector('.formula-section:nth-child(2) .formula-item:nth-child(1)');
            clearInputs(container);
            hideResult('result-mkt');
        }

        function calculateMKT2() {
            const container = event.target.closest('.formula-item');
            const p = toNumber(
                container.querySelector('.p2-mantissa').value, 
                container.querySelector('.p2-exponent').value,
                container.querySelector('.p2-unit').value,
                'pressure'
            );
            const n = toNumber(
                container.querySelector('.n2-mantissa').value, 
                container.querySelector('.n2-exponent').value,
                container.querySelector('.n2-unit').value,
                'concentration'
            );
            const m0 = toNumber(
                container.querySelector('.m0-mantissa').value, 
                container.querySelector('.m0-exponent').value,
                container.querySelector('.m0-unit').value,
                'mass'
            );
            const v = toNumber(
                container.querySelector('.v2-mantissa').value, 
                container.querySelector('.v2-exponent').value,
                container.querySelector('.v2-unit').value,
                'velocity'
            );
            
            let result, unit, type, message;
            const values = [p, n, m0, v];
            const filled = getFilledCount(values);
            
            if (filled < 3) {
                message = "Введите значения для любых трёх величин";
            } else {
                if (isNaN(p)) {
                    result = (1/3) * n * m0 * v * v;
                    unit = container.querySelector('.p2-unit').value;
                    type = 'pressure';
                    message = `Давление p = ${formatResult(result, unit, type)}`;
                } else if (isNaN(n)) {
                    result = (3 * p) / (m0 * v * v);
                    unit = container.querySelector('.n2-unit').value;
                    type = 'concentration';
                    message = `Концентрация n = ${formatResult(result, unit, type)}`;
                } else if (isNaN(m0)) {
                    result = (3 * p) / (n * v * v);
                    unit = container.querySelector('.m0-unit').value;
                    type = 'mass';
                    message = `Масса молекулы m₀ = ${formatResult(result, unit, type)}`;
                } else if (isNaN(v)) {
                    result = Math.sqrt((3 * p) / (n * m0));
                    unit = container.querySelector('.v2-unit').value;
                    type = 'velocity';
                    message = `Скорость v = ${formatResult(result, unit, type)}`;
                }
            }
            
            showResult('result-mkt2', message);
        }

        function clearMKT2() {
            const container = document.querySelector('.formula-section:nth-child(2) .formula-item:nth-child(2)');
            clearInputs(container);
            hideResult('result-mkt2');
        }

        function calculateKineticEnergy() {
            const container = event.target.closest('.formula-item');
            const e = toNumber(
                container.querySelector('.e-mantissa').value, 
                container.querySelector('.e-exponent').value,
                container.querySelector('.e-unit').value,
                'energy'
            );
            const t = toNumber(
                container.querySelector('.t-mantissa').value, 
                container.querySelector('.t-exponent').value,
                container.querySelector('.t-unit').value,
                'temperature'
            );
            
            let result, unit, type, message;
            
            if (!isNaN(t)) {
                result = (3/2) * k * t;
                unit = container.querySelector('.e-unit').value;
                type = 'energy';
                message = `Средняя кинетическая энергия E = ${formatResult(result, unit, type)}`;
            } else if (!isNaN(e)) {
                result = (2 * e) / (3 * k);
                unit = container.querySelector('.t-unit').value;
                type = 'temperature';
                message = `Температура T = ${formatResult(result, unit, type)}`;
            } else {
                message = "Введите значение температуры или энергии";
            }
            
            showResult('result-kinetic-energy', message);
        }

        function clearKineticEnergy() {
            const container = document.querySelector('.formula-section:nth-child(2) .formula-item:nth-child(3)');
            clearInputs(container);
            hideResult('result-kinetic-energy');
        }

        function calculateInternalEnergy() {
            const container = event.target.closest('.formula-item');
            const u = toNumber(
                container.querySelector('.u-mantissa').value, 
                container.querySelector('.u-exponent').value,
                container.querySelector('.u-unit').value,
                'energy'
            );
            const nu = toNumber(
                container.querySelector('.nu-mantissa').value, 
                container.querySelector('.nu-exponent').value,
                container.querySelector('.nu-unit').value,
                'amount'
            );
            const t = toNumber(
                container.querySelector('.t-mantissa').value, 
                container.querySelector('.t-exponent').value,
                container.querySelector('.t-unit').value,
                'temperature'
            );
            
            let result, unit, type, message;
            
            if (!isNaN(nu) && !isNaN(t)) {
                result = (3/2) * nu * R * t;
                unit = container.querySelector('.u-unit').value;
                type = 'energy';
                message = `Внутренняя энергия U = ${formatResult(result, unit, type)}`;
            } else if (!isNaN(u) && !isNaN(t)) {
                result = (2 * u) / (3 * R * t);
                unit = container.querySelector('.nu-unit').value;
                type = 'amount';
                message = `Количество вещества ν = ${formatResult(result, unit, type)}`;
            } else if (!isNaN(u) && !isNaN(nu)) {
                result = (2 * u) / (3 * nu * R);
                unit = container.querySelector('.t-unit').value;
                type = 'temperature';
                message = `Температура T = ${formatResult(result, unit, type)}`;
            } else {
                message = "Введите значения для любых двух величин";
            }
            
            showResult('result-internal-energy', message);
        }

        function clearInternalEnergy() {
            const container = document.querySelector('.formula-section:nth-child(3) .formula-item:nth-child(1)');
            clearInputs(container);
            hideResult('result-internal-energy');
        }

        function calculateFirstLaw() {
            const container = event.target.closest('.formula-item');
            const q = toNumber(
                container.querySelector('.q-mantissa').value, 
                container.querySelector('.q-exponent').value,
                container.querySelector('.q-unit').value,
                'energy'
            );
            const du = toNumber(
                container.querySelector('.du-mantissa').value, 
                container.querySelector('.du-exponent').value,
                container.querySelector('.du-unit').value,
                'energy'
            );
            const a = toNumber(
                container.querySelector('.a-mantissa').value, 
                container.querySelector('.a-exponent').value,
                container.querySelector('.a-unit').value,
                'energy'
            );
            
            let result, unit, type, message;
            
            if (!isNaN(du) && !isNaN(a)) {
                result = du + a;
                unit = container.querySelector('.q-unit').value;
                type = 'energy';
                message = `Количество теплоты Q = ${formatResult(result, unit, type)}`;
            } else if (!isNaN(q) && !isNaN(a)) {
                result = q - a;
                unit = container.querySelector('.du-unit').value;
                type = 'energy';
                message = `Изменение внутренней энергии ΔU = ${formatResult(result, unit, type)}`;
            } else if (!isNaN(q) && !isNaN(du)) {
                result = q - du;
                unit = container.querySelector('.a-unit').value;
                type = 'energy';
                message = `Работа газа A' = ${formatResult(result, unit, type)}`;
            } else {
                message = "Введите значения для любых двух величин";
            }
            
            showResult('result-first-law', message);
        }

        function clearFirstLaw() {
            const container = document.querySelector('.formula-section:nth-child(3) .formula-item:nth-child(2)');
            clearInputs(container);
            hideResult('result-first-law');
        }

        function calculateEfficiency() {
            const container = event.target.closest('.formula-item');
            const eta = toNumber(
                container.querySelector('.eta-mantissa').value, 
                container.querySelector('.eta-exponent').value,
                container.querySelector('.eta-unit').value,
                'efficiency'
            );
            const a = toNumber(
                container.querySelector('.a-mantissa').value, 
                container.querySelector('.a-exponent').value,
                container.querySelector('.a-unit').value,
                'energy'
            );
            const q1 = toNumber(
                container.querySelector('.q1-mantissa').value, 
                container.querySelector('.q1-exponent').value,
                container.querySelector('.q1-unit').value,
                'energy'
            );
            const q2 = toNumber(
                container.querySelector('.q2-mantissa').value, 
                container.querySelector('.q2-exponent').value,
                container.querySelector('.q2-unit').value,
                'energy'
            );
            
            let result, unit, type, message;
            const etaUnit = container.querySelector('.eta-unit').value;
            
            if (!isNaN(a) && !isNaN(q1)) {
                result = a / q1;
                message = `КПД η = ${formatPercentage(result, etaUnit)}`;
            } else if (!isNaN(q1) && !isNaN(q2)) {
                result = (q1 - q2) / q1;
                message = `КПД η = ${formatPercentage(result, etaUnit)}`;
            } else if (!isNaN(eta) && !isNaN(q1)) {
                const etaValue = (etaUnit === '%') ? eta / 100 : eta;
                if (!isNaN(a)) {
                    result = etaValue * q1;
                    unit = container.querySelector('.a-unit').value;
                    type = 'energy';
                    message = `Работа A' = ${formatResult(result, unit, type)}`;
                } else if (!isNaN(q2)) {
                    result = q1 - etaValue * q1;
                    unit = container.querySelector('.q2-unit').value;
                    type = 'energy';
                    message = `Теплота холодильника Q₂ = ${formatResult(result, unit, type)}`;
                } else {
                    result = etaValue * q1;
                    const work = result;
                    const q2val = q1 - result;
                    const workUnit = container.querySelector('.a-unit').value;
                    const q2Unit = container.querySelector('.q2-unit').value;
                    message = `Работа A' = ${formatResult(work, workUnit, 'energy')}<br>Теплота холодильника Q₂ = ${formatResult(q2val, q2Unit, 'energy')}`;
                }
            } else if (!isNaN(eta) && !isNaN(a)) {
                const etaValue = (etaUnit === '%') ? eta / 100 : eta;
                result = a / etaValue;
                unit = container.querySelector('.q1-unit').value;
                type = 'energy';
                message = `Теплота нагревателя Q₁ = ${formatResult(result, unit, type)}`;
            } else if (!isNaN(eta) && !isNaN(q2)) {
                const etaValue = (etaUnit === '%') ? eta / 100 : eta;
                result = q2 / (1 - etaValue);
                unit = container.querySelector('.q1-unit').value;
                type = 'energy';
                message = `Теплота нагревателя Q₁ = ${formatResult(result, unit, type)}`;
            } else {
                message = "Введите значения для любых двух величин";
            }
            
            showResult('result-efficiency', message);
        }

        function clearEfficiency() {
            const container = document.querySelector('.formula-section:nth-child(4) .formula-item:nth-child(1)');
            clearInputs(container);
            hideResult('result-efficiency');
        }

        function calculateCarnot() {
            const container = event.target.closest('.formula-item');
            const eta = toNumber(
                container.querySelector('.eta-mantissa').value, 
                container.querySelector('.eta-exponent').value,
                container.querySelector('.eta-unit').value,
                'efficiency'
            );
            const t1 = toNumber(
                container.querySelector('.t1-mantissa').value, 
                container.querySelector('.t1-exponent').value,
                container.querySelector('.t1-unit').value,
                'temperature'
            );
            const t2 = toNumber(
                container.querySelector('.t2-mantissa').value, 
                container.querySelector('.t2-exponent').value,
                container.querySelector('.t2-unit').value,
                'temperature'
            );
            
            let result, unit, type, message;
            const etaUnit = container.querySelector('.eta-unit').value;
            
            if (!isNaN(t1) && !isNaN(t2)) {
                result = 1 - (t2 / t1);
                message = `КПД Карно η = ${formatPercentage(result, etaUnit)}`;
            } else if (!isNaN(eta) && !isNaN(t1)) {
                const etaValue = (etaUnit === '%') ? eta / 100 : eta;
                result = t1 * (1 - etaValue);
                unit = container.querySelector('.t2-unit').value;
                type = 'temperature';
                message = `Температура холодильника T₂ = ${formatResult(result, unit, type)}`;
            } else if (!isNaN(eta) && !isNaN(t2)) {
                const etaValue = (etaUnit === '%') ? eta / 100 : eta;
                result = t2 / (1 - etaValue);
                unit = container.querySelector('.t1-unit').value;
                type = 'temperature';
                message = `Температура нагревателя T₁ = ${formatResult(result, unit, type)}`;
            } else {
                message = "Введите значения для любых двух величин";
            }
            
            showResult('result-carnot', message);
        }

        function clearCarnot() {
            const container = document.querySelector('.formula-section:nth-child(4) .formula-item:nth-child(2)');
            clearInputs(container);
            hideResult('result-carnot');
        }

        document.addEventListener('DOMContentLoaded', function() {
            const tInputs = document.querySelectorAll('.t-mantissa, .t1-mantissa');
            tInputs.forEach(input => {
                if (input.value === '' && input.classList.contains('t-mantissa')) {
                    input.value = '293';
                } else if (input.value === '' && input.classList.contains('t1-mantissa')) {
                    input.value = '373';
                }
            });
            
            const m0Inputs = document.querySelectorAll('.m0-exponent');
            m0Inputs.forEach(input => {
                if (input.value === '' || input.value === '0') {
                    input.value = '-27';
                }
            });
        });
    </script>
</body>
</html>
